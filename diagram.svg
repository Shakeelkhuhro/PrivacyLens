<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="320" viewBox="0 0 1200 320">
  <style>
    .box{fill:#f8f8fb;stroke:#2b2730;stroke-width:2;filter:drop-shadow(2px,2px,2px,#00000020)}
    .arrow{stroke:#2b2730;stroke-width:3;fill:none;marker-end:url(#arrowhead)}
    .small{font:12px/1.2 "Helvetica", Arial, sans-serif;fill:#2b2730}
    .title{font:16px/1.2 "Helvetica", Arial, sans-serif;fill:#2b2730;font-weight:600}
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2b2730" />
    </marker>
  </defs>

  <!-- Frontend -->
  <rect x="20" y="40" width="140" height="50" rx="6" class="box"/>
  <text x="90" y="70" text-anchor="middle" class="title">Frontend</text>
  <text x="90" y="86" text-anchor="middle" class="small">(Expo / React)</text>

  <!-- Backend -->
  <rect x="200" y="20" width="220" height="90" rx="6" class="box"/>
  <text x="310" y="50" text-anchor="middle" class="title">Backend</text>
  <text x="310" y="66" text-anchor="middle" class="small">(Express) â€” orchestrates scraping & LLM</text>

  <!-- Play Store scraper -->
  <rect x="460" y="10" width="160" height="40" rx="6" class="box"/>
  <text x="540" y="36" text-anchor="middle" class="small">Play Store scraper</text>

  <!-- Play Store page text -->
  <rect x="640" y="10" width="160" height="40" rx="6" class="box"/>
  <text x="720" y="36" text-anchor="middle" class="small">Play Store page text</text>

  <!-- Privacy policy fetcher -->
  <rect x="460" y="80" width="220" height="50" rx="6" class="box"/>
  <text x="570" y="108" text-anchor="middle" class="small">Privacy policy fetcher</text>

  <!-- Decision diamond (policy success?) -->
  <g transform="translate(820,60)">
    <polygon points="0,-30 40,0 0,30 -40,0" fill="#ffffff" stroke="#2b2730" stroke-width="2"/>
    <text x="0" y="4" text-anchor="middle" class="small">Policy fetch?</text>
  </g>

  <!-- Azure box -->
  <rect x="960" y="10" width="220" height="150" rx="6" class="box"/>
  <text x="1070" y="36" text-anchor="middle" class="title">Azure</text>
  <rect x="980" y="58" width="180" height="40" rx="4" fill="#ffffff" stroke="#2b2730"/>
  <text x="1070" y="82" text-anchor="middle" class="small">Enhance with LLM</text>
  <rect x="980" y="108" width="180" height="40" rx="4" fill="#ffffff" stroke="#2b2730"/>
  <text x="1070" y="132" text-anchor="middle" class="small">Fallback: website / Play Store text</text>

  <!-- Normalize and Cache -->
  <rect x="640" y="140" width="200" height="50" rx="6" class="box"/>
  <text x="740" y="168" text-anchor="middle" class="small">Normalize results</text>
  <rect x="880" y="140" width="140" height="50" rx="6" class="box"/>
  <text x="950" y="168" text-anchor="middle" class="small">Cache (24h)</text>

  <!-- Arrows -->
  <path class="arrow" d="M160,65 L200,65" />
  <path class="arrow" d="M420,65 L460,65" />
  <path class="arrow" d="M620,30 L640,30" />
  <path class="arrow" d="M620,100 L640,100" />
  <path class="arrow" d="M700,30 L820,30" />
  <path class="arrow" d="M700,100 L820,100" />
  <path class="arrow" d="M860,60 L960,60" />
  <path class="arrow" d="M880,110 L980,130" />
  <path class="arrow" d="M900,165 L880,165" />
  <path class="arrow" d="M1020,95 L840,155" />
  <path class="arrow" d="M760,165 L880,165" />

  <!-- Return arrow from cache back to backend -->
  <path class="arrow" d="M920,165 L420,170 L420,110" />

  <!-- JSON arrow back to frontend -->
  <path class="arrow" d="M420,35 L180,65" />

  <!-- Small labels -->
  <text x="300" y="12" class="small">HTTP</text>
  <text x="300" y="90" class="small">JSON</text>

</svg>
